# 数据查询

```javascript
let User = AV.extend('user')
let User = AV.extend('user', true) // 用于Mock数据

User.where({id: 1, age: 20})

User.where(["id > ? and age < 10", 1])
User.where(["id > ? and age < ?", 1])
User.where(["id > ? and age < ?", 1, 2, 3])
User.where(["id > ? or age < ?", 1, 2])

//- 排序
User.order('id')   //- 升序
User.order('-id')  //- 降序

//- 分页
User.skip(1)
User.limit(10)


//- 查询结果
User.where(["id > ?", 1]).all().then((data)=> {
  //- ...
})
User.where(["id > ?", 1]).first().then((item)=> {
  //- ...
})

//- 分页查询
//pagination 一般传 {}， 默认参数为 {page: 1, pagesize: 15, wraper: '#data-list'}
User.where(["id > ?", 1]).all(pagination).then((data)=> {
  //- ...
})

```


# 增删改

```javascript
// 给予 User 新建对象，如果上面的 User 是走 Mock 数据，那么这里的增删改查也是走Mock了
let user = User.new()

// 初始化字段
let user = User.new({name: 'hxh', age: 12})

// 删除
user.destroy().then((data)=> {
  Core.alert('success', '删除会员成功')
})

// 新增保存
user.save().then((data)=> {
  Core.alert('success', '新增会员成功')
})

// 更新
user.update().then((data)=> {
  Core.alert('success', '更新会员成功')
})

```

# Mock 数据
前后端分离后我们可以实现开发的同时进行，这时我们就需要在后端未开发完接口之前就可以进行前端页面的开发，那么自然而然就要做接口数据的模拟了。

在对应的 mock 数据目录（`/src/js/mock/Table/`）下创建数据（与表名相同）文件。

比如我们要模拟 `user` 表的增删改查，那么我们需要做的是：

#### 1、创建一个 `/src/js/mock/Table/user.js` 文件：

```javascript
module.exports = { 
  items: [
    {
      id: 1,
      username: 'hxh',
      create_time: 123445,
      followed: 23
    }
  ],
  count: 34
}
```
注意这里的格式是 `{item: [], count: 12}`

#### 2、修改对象初始化的参数

```javascript
let User = AV.extend('user', true)
```


# 实例

请访问 `/test/list` 和 `/test/new` 页面
